<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ODIN // HOLO</title>
    <link rel="stylesheet" href="common.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

        :root {
            --c-bg: #05080a;
            --c-glow: #00f0ff;
            --c-dim: #003840;
            --c-text: #ccfaff;
            --f-mono: 'Share Tech Mono', monospace;
        }

        body {
            background-color: var(--c-bg);
            color: var(--c-text);
            font-family: var(--f-mono);
            /* Grid floor perspective hint */
            background: linear-gradient(180deg, var(--c-bg) 0%, #0a1014 100%);
        }

        .viewport {
            max-width: 600px;
            margin: 0 auto;
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            padding: 20px;
        }

        /* Holo Elements */
        .holo-panel {
            border: 1px solid var(--c-dim);
            background: rgba(0, 240, 255, 0.03);
            box-shadow: 0 0 15px rgba(0, 240, 255, 0.05);
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
        }

        .holo-panel::before, .holo-panel::after {
            content: '';
            position: absolute;
            width: 5px; height: 5px;
            border: 1px solid var(--c-glow);
            transition: 0.3s;
        }
        .holo-panel::before { top: -1px; left: -1px; border-right: none; border-bottom: none; }
        .holo-panel::after { bottom: -1px; right: -1px; border-left: none; border-top: none; }

        .holo-btn {
            background: rgba(0, 240, 255, 0.1);
            border: 1px solid var(--c-glow);
            color: var(--c-glow);
            text-transform: uppercase;
            padding: 15px 30px;
            font-size: 1.2rem;
            letter-spacing: 2px;
            width: 100%;
            margin-top: auto;
            position: relative;
            overflow: hidden;
            font-family: var(--f-mono);
            box-shadow: 0 0 10px rgba(0, 240, 255, 0.2);
            transition: 0.2s;
        }

        .holo-btn:hover {
            background: var(--c-glow);
            color: #000;
            box-shadow: 0 0 20px var(--c-glow);
        }

        .holo-btn:active {
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        h1 {
            color: var(--c-glow);
            text-shadow: 0 0 10px var(--c-glow);
            text-transform: uppercase;
            font-weight: normal;
            border-bottom: 2px solid var(--c-dim);
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        /* List */
        .grid-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .grid-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid var(--c-dim);
            cursor: pointer;
        }

        .grid-item:hover {
            background: rgba(0, 240, 255, 0.1);
            color: #fff;
        }

        .grid-item.complete {
            opacity: 0.3;
            pointer-events: none;
        }

        /* Stats */
        .stat-group {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin: 40px 0;
        }

        .stat-num {
            font-size: 4rem;
            color: var(--c-glow);
            text-shadow: 0 0 15px rgba(0, 240, 255, 0.5);
            line-height: 1;
        }
        
        .stat-desc {
            font-size: 0.8rem;
            color: #6da;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Inputs */
        input {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--c-dim);
            color: #fff;
            padding: 10px;
            font-size: 2rem;
            font-family: var(--f-mono);
            width: 100%;
            text-align: center;
            margin-bottom: 20px;
        }
        
        input:focus {
            border-color: var(--c-glow);
            box-shadow: 0 0 10px var(--c-dim);
        }

        /* Timer */
        .timer-h {
            font-size: 8rem;
            text-align: center;
            color: #fff;
            text-shadow: 0 0 20px #fff;
        }

    </style>
</head>
<body>

    <div class="viewport">
        
        <div style="font-size: 0.7rem; color: var(--c-dim); text-align: right; margin-bottom: 10px;">
            SYS.V.2.04 // SECURE
        </div>

        <!-- Main -->
        <div id="page-main" class="page hidden full-screen flex-center" style="flex-direction: column;">
            <div class="holo-panel" style="text-align: center; padding: 40px;">
                <h2 style="font-weight: normal; margin-bottom: 10px;">PROJECTION</h2>
                <div style="font-size: 3rem; color: var(--c-glow); text-shadow: 0 0 10px var(--c-glow);">READY</div>
            </div>
            <button class="holo-btn" style="margin-top: 40px;" onclick="app.startWorkout()">Initialize</button>
        </div>

        <!-- Circuit -->
        <div id="page-circuit" class="page hidden">
            <h1>Active Modules</h1>
            <div id="circuit-list" class="grid-list"></div>
        </div>

        <!-- Progress -->
        <div id="page-progress" class="page hidden full-screen" style="flex-direction: column; display: flex;">
            <h1>Module Status</h1>
            
            <div class="holo-panel">
                <div style="text-align: center;">
                    <span class="stat-desc">Target Unit</span>
                    <div style="font-size: 2rem; margin-top: 10px;" id="prog-name">NAME</div>
                </div>
            </div>

            <div class="stat-group">
                <div>
                    <div class="stat-num" id="prog-set">1</div>
                    <div class="stat-desc">Sequence</div>
                </div>
                <div>
                    <div class="stat-num" id="prog-target">12</div>
                    <div class="stat-desc">Load Req</div>
                </div>
            </div>

            <button class="holo-btn" onclick="app.enterResultData()">Capture Data</button>
        </div>

        <!-- Result -->
        <div id="page-result-input" class="page hidden full-screen" style="flex-direction: column; display: flex;">
            <h1>Data Entry</h1>
            
            <div style="margin: auto 0;">
                <div class="stat-desc">Repetitions</div>
                <input type="number" id="input-reps">
                
                <div class="stat-desc">Mass (kg)</div>
                <input type="number" id="input-weight">
            </div>

            <button class="holo-btn" onclick="submitForm()">Upload</button>
        </div>

        <!-- Rest -->
        <div id="page-rest" class="page hidden full-screen flex-center" style="flex-direction: column;">
            <div class="stat-desc" style="margin-bottom: 20px;">System Recharge</div>
            <div class="timer-h" id="rest-timer">00:03</div>
        </div>

    </div>

    <script src="common.js"></script>
    <script>
        const app = new WorkoutFlow({
            renderPage: (pageId, state) => {
                document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
                document.getElementById(pageId).classList.remove('hidden');
                document.getElementById(pageId).style.display = 'flex';
                if(pageId === 'page-circuit') document.getElementById(pageId).style.display = 'block';

                if (pageId === 'page-circuit') renderCircuit(state.workout);
                if (pageId === 'page-progress') {
                    document.getElementById('prog-name').innerText = state.activeExercise.name;
                    document.getElementById('prog-set').innerText = state.activeExercise.completedSets + 1;
                    document.getElementById('prog-target').innerText = state.activeExercise.reps;
                }
            },
            updateTimer: (seconds) => {
                const min = Math.floor(seconds / 60).toString().padStart(2, '0');
                const sec = (seconds % 60).toString().padStart(2, '0');
                document.getElementById('rest-timer').innerText = `${min}:${sec}`;
            }
        });

        function renderCircuit(workout) {
            const list = document.getElementById('circuit-list');
            list.innerHTML = '';
            workout.exercises.forEach(ex => {
                const div = document.createElement('div');
                div.className = `grid-item ${ex.isComplete ? 'complete' : ''}`;
                div.innerHTML = `
                    <span>${ex.name}</span>
                    <span style="color: var(--c-glow)">[${ex.completedSets}/${ex.sets}]</span>
                `;
                div.onclick = () => app.selectExercise(ex.id);
                list.appendChild(div);
            });
        }

        function submitForm() {
            const reps = document.getElementById('input-reps').value;
            const weight = document.getElementById('input-weight').value;
            app.submitResult(reps, weight);
            document.getElementById('input-reps').value = '';
        }
    </script>
</body>
</html>
