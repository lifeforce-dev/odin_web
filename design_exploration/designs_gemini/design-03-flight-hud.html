<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ODIN // FLIGHT HUD</title>
    <link rel="stylesheet" href="common.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap');

        :root {
            --c-space: #0b0d14;
            --c-glass: rgba(16, 30, 50, 0.6);
            --c-hud-blue: #00d9ff;
            --c-hud-orange: #ff9100;
            --f-display: 'Orbitron', sans-serif;
            --f-ui: 'Rajdhani', sans-serif;
        }

        body {
            background: var(--c-space);
            color: #fff;
            font-family: var(--f-ui);
            background: radial-gradient(circle at center, #1a2adb 0%, var(--c-space) 60%);
        }

        /* Scan lines & vignetting */
        body::after {
            content: "";
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: 
                linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
            z-index: 999;
        }

        .hud-frame {
            position: absolute;
            top: 20px; bottom: 20px; left: 20px; right: 20px;
            border: 1px solid rgba(0, 217, 255, 0.3);
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.1), inset 0 0 50px rgba(0, 217, 255, 0.05);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* Decoration lines */
        .hud-frame::before {
            content: '';
            position: absolute;
            top: 50%; left: 0; right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(0, 217, 255, 0.2), transparent);
            pointer-events: none;
            z-index: -1;
        }

        /* Center Circle */
        .reticle {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 300px; height: 300px;
            border: 1px solid rgba(0, 217, 255, 0.1);
            border-radius: 50%;
            pointer-events: none;
            z-index: -1;
        }

        /* Typography */
        h1, h2 {
            font-family: var(--f-display);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--c-hud-blue);
            text-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
        }

        /* Buttons */
        .glass-btn {
            background: var(--c-glass);
            border: 1px solid var(--c-hud-blue);
            color: #fff;
            font-family: var(--f-display);
            padding: 15px 40px;
            font-size: 1.2rem;
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
            transition: 0.3s;
            backdrop-filter: blur(4px);
            margin: 10px;
            text-transform: uppercase;
        }

        .glass-btn:hover {
            background: var(--c-hud-blue);
            color: #000;
            box-shadow: 0 0 30px var(--c-hud-blue);
        }

        /* Lists */
        .nav-list {
            padding: 20px;
            overflow-y: auto;
        }

        .nav-item {
            background: linear-gradient(90deg, rgba(0, 217, 255, 0.1), transparent);
            padding: 15px;
            border-left: 3px solid var(--c-hud-blue);
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.2rem;
        }
        
        .nav-item:hover {
            background: linear-gradient(90deg, rgba(0, 217, 255, 0.2), transparent);
            padding-left: 20px; /* Slight movement */
            transition: 0.3s;
        }

        .nav-item.complete {
            opacity: 0.5;
            border-left-color: #555;
            filter: grayscale(1);
        }

        /* Viewport */
        .view-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 10;
        }

        .stat-circle {
            width: 200px;
            height: 200px;
            border: 5px solid var(--c-hud-blue);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 20px;
            box-shadow: 0 0 20px var(--c-hud-blue), inset 0 0 20px var(--c-hud-blue);
            background: rgba(0,0,0,0.5);
        }

        .stat-val {
            font-family: var(--f-display);
            font-size: 3rem;
            line-height: 1;
        }
        .stat-label {
            font-size: 0.8rem;
            color: var(--c-hud-blue);
            margin-top: 5px;
        }

        /* Inputs */
        input.hud-input {
            background: rgba(0,0,0,0.5);
            border: 2px solid var(--c-hud-orange);
            color: #fff;
            padding: 10px;
            font-family: var(--f-display);
            font-size: 2rem;
            text-align: center;
            width: 150px;
            margin: 10px;
            border-radius: 10px;
        }
        
        input.hud-input:focus {
            box-shadow: 0 0 20px var(--c-hud-orange);
        }

    </style>
</head>
<body>
    <div class="hud-frame">
        
        <div class="reticle"></div> <!-- visual bg -->

        <div style="padding: 20px; display: flex; justify-content: space-between; align-items: center;">
            <div style="font-size: 0.8rem; color: var(--c-hud-blue);">SYS.ORBITAL</div>
            <div style="font-size: 0.8rem; color: var(--c-hud-orange);">SYNCED</div>
        </div>

        <!-- Main -->
        <div id="page-main" class="page hidden full-screen flex-center" style="flex-direction: column;">
            <h1>Flight Deck</h1>
            <p style="margin-bottom: 2rem; color: #aaa;">PRE-FLIGHT CHECKS COMPLETE</p>
            <button class="glass-btn" onclick="app.startWorkout()">Launch</button>
        </div>

        <!-- Circuit -->
        <div id="page-circuit" class="page hidden full-screen" style="display: flex; flex-direction: column;">
            <div style="padding: 20px; text-align: center;"><h2>Flight Path</h2></div>
            <div id="circuit-list" class="nav-list"></div>
        </div>

        <!-- Progress -->
        <div id="page-progress" class="page hidden full-screen" style="display: flex; flex-direction: column;">
             <div class="view-content">
                 <h2 id="prog-name">NAME</h2>
                 <div class="stat-circle">
                     <span class="stat-val" id="prog-target">12</span>
                     <span class="stat-label">REQ THRUST</span>
                 </div>
                 <div style="font-size: 1.5rem;">SEQ: <span id="prog-set">1</span> / <span id="prog-total">3</span></div>
             </div>
             <div style="padding: 20px; text-align: center;">
                 <button class="glass-btn" onclick="app.enterResultData()">Initiate Log</button>
             </div>
        </div>

        <!-- Result -->
        <div id="page-result-input" class="page hidden full-screen" style="display: flex; flex-direction: column;">
            <div class="view-content">
                <h2>Telemetry Input</h2>
                <div>
                    <input type="number" id="input-reps" class="hud-input" placeholder="cnt">
                    <input type="number" id="input-weight" class="hud-input" placeholder="kg">
                </div>
            </div>
            <div style="padding: 20px; text-align: center;">
                <button class="glass-btn" style="border-color: var(--c-hud-orange); color: var(--c-hud-orange);" onclick="submitForm()">Transmit</button>
            </div>
        </div>

        <!-- Rest -->
        <div id="page-rest" class="page hidden full-screen flex-center" style="flex-direction: column;">
            <div style="color: var(--c-hud-orange); font-size: 1.2rem; letter-spacing: 5px; margin-bottom: 20px;">COOLING DOWN</div>
            <div style="font-family: var(--f-display); font-size: 6rem; color: #fff; text-shadow: 0 0 30px #fff;" id="rest-timer">00:00</div>
        </div>

    </div>

    <script src="common.js"></script>
    <script>
        const app = new WorkoutFlow({
            renderPage: (pageId, state) => {
                document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
                document.getElementById(pageId).classList.remove('hidden');
                
                if (pageId === 'page-circuit') renderCircuit(state.workout);
                if (pageId === 'page-progress') {
                    document.getElementById('prog-name').innerText = state.activeExercise.name;
                    document.getElementById('prog-set').innerText = state.activeExercise.completedSets + 1;
                    document.getElementById('prog-total').innerText = state.activeExercise.sets;
                    document.getElementById('prog-target').innerText = state.activeExercise.reps;
                }
            },
            updateTimer: (seconds) => {
                const min = Math.floor(seconds / 60).toString().padStart(2, '0');
                const sec = (seconds % 60).toString().padStart(2, '0');
                document.getElementById('rest-timer').innerText = `${min}:${sec}`;
            }
        });

        function renderCircuit(workout) {
            const list = document.getElementById('circuit-list');
            list.innerHTML = '';
            workout.exercises.forEach(ex => {
                const div = document.createElement('div');
                div.className = `nav-item ${ex.isComplete ? 'complete' : ''}`;
                div.innerHTML = `
                    <span>${ex.name}</span>
                    <span style="font-family: var(--f-display)">${ex.completedSets}/${ex.sets}</span>
                `;
                div.onclick = () => app.selectExercise(ex.id);
                list.appendChild(div);
            });
        }

        function submitForm() {
            const reps = document.getElementById('input-reps').value;
            const weight = document.getElementById('input-weight').value;
            app.submitResult(reps, weight);
            document.getElementById('input-reps').value = '';
        }
    </script>
</body>
</html>
